# vim: set filetype=sh:
# Basic functions

function update-ssh-known-hosts () {
	echo "Updating ssh known hosts from fenari"
	scp fenari.wikimedia.org:/etc/ssh/ssh_known_hosts ~/.ssh/known_hosts-wmf
}

# Run git with tracing
function gittrace() {
	GIT_TRACE=1 git "$@"
}

function gerrit() {
	if [ -z "$1" ]; then
		ARGS="--help"
	else
		ARGS="$@"
	fi;
	set -x
	ssh -p 29418 hashar@gerrit.wikimedia.org "gerrit $ARGS"
	set +x
}

# Show up a pint of beer on Mac OS X :-D
# BEER MUG (U+1F37A) -- thanks Saper for the reference
function beer() {
	echo 'üç∫ ';
}

function jenkins() {
	cmd=$1
	shift

	case "$cmd" in
	"validate")
		# Create a dummy change for jenkins validation
		touch JENKINS \
			&& git add JENKINS \
			&& git commit -m 'Jenkins job validation (DO NOT SUBMIT)' \
			&& git show \
			&& echo "Now send the change!"
		;;
	'help' | *)
		echo "Oh no"
		;;
	esac
}
